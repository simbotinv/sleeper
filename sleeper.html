<!DOCTYPE HTML>
<html>
<head>
    <title>Internet downloader - Sleeper</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        #sleeper li {
            background-image: url('data:image/svg+xml;utf8,<svg fill="rgba(255,82,82,0.87)" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0.41,13.41L6,19L7.41,17.58L1.83,12M22.24,5.58L11.66,16.17L7.5,12L6.07,13.41L11.66,19L23.66,7M18,7L16.59,5.58L10.24,11.93L11.66,13.34L18,7Z" /></svg>');
            background-position: left center;
            background-repeat: no-repeat;
            padding-left: 32px;
        }
    </style>
</head>
<body>

<ul id="sleeper"></ul>

<script>
    var xhr = new XMLHttpRequest()
    xhr.open("GET", "/sleeper.php", true);
    xhr.onprogress = function () {
        var html = '';
        var array = xhr.responseText.match(/[^\r\n]+/g);
        var data =  JSON.parse(array[array.length - 1]);
        if ( typeof data === "object") {
            console.log(data);
            for ( var i in data) {
                console.log('ssss: ' + i);
                html += "<li>" + data[i].line + ' ' + data[i].task + '</li>';
            }
            document.getElementById('sleeper').innerHTML = html;
        }
    };
    xhr.onload = function () {
        console.log('Some code after load');
    };
    xhr.send()
</script>


</body>
</html>


